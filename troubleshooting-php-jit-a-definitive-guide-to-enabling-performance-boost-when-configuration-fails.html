<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Troubleshooting PHP JIT: A Definitive Guide to Enabling Performance Boost When Configuration Fails - PHPMemo</title><meta name="description" content="Many posts online suggest that enabling PHP JIT is as simple as adding some values to the php.ini file, but that's not exactly the case."><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://phpmemo.com/media/plugins/syntaxHighlighter/prism-black.css"><link rel="canonical" href="https://phpmemo.com/troubleshooting-php-jit-a-definitive-guide-to-enabling-performance-boost-when-configuration-fails.html"><link rel="alternate" type="application/atom+xml" href="https://phpmemo.com/feed.xml"><link rel="alternate" type="application/json" href="https://phpmemo.com/feed.json"><meta property="og:title" content="Troubleshooting PHP JIT: A Definitive Guide to Enabling Performance Boost When Configuration Fails"><meta property="og:site_name" content="PHPMemo"><meta property="og:description" content="Many posts online suggest that enabling PHP JIT is as simple as adding some values to the php.ini file, but that's not exactly the case."><meta property="og:url" content="https://phpmemo.com/troubleshooting-php-jit-a-definitive-guide-to-enabling-performance-boost-when-configuration-fails.html"><meta property="og:type" content="article"><link rel="preload" href="https://phpmemo.com/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="https://phpmemo.com/assets/dynamic/fonts/jetbrainsmono/jetbrainsmono-italic.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://phpmemo.com/assets/css/style.css?v=82007ae11cb9f2a56571c770331b13e7"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://phpmemo.com/troubleshooting-php-jit-a-definitive-guide-to-enabling-performance-boost-when-configuration-fails.html"},"headline":"Troubleshooting PHP JIT: A Definitive Guide to Enabling Performance Boost When Configuration Fails","datePublished":"2024-11-30T18:18+02:00","dateModified":"2024-11-30T18:20+02:00","description":"Many posts online suggest that enabling PHP JIT is as simple as adding some values to the php.ini file, but that's not exactly the case.","author":{"@type":"Person","name":"Enxas","url":"https://phpmemo.com/authors/enxas/"},"publisher":{"@type":"Organization","name":"Enxas"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="post-template"><div class="container container--center"><header class="header"><div class="header__logo"><a class="logo" href="https://phpmemo.com/">PHPMemo</a></div></header><main class="content"><article class="post"><header><h1 class="post__title">Troubleshooting PHP JIT: A Definitive Guide to Enabling Performance Boost When Configuration Fails</h1><div class="post__meta"><time datetime="2024-11-30T18:18" class="post__date">November 30, 2024 </time><span class="post__author"><a href="https://phpmemo.com/authors/enxas/" class="feed__author">Enxas</a></span></div><div class="post__tags"><a href="https://phpmemo.com/tags/docker/" class="invert">Docker</a> <a href="https://phpmemo.com/tags/jit/" class="invert">JIT</a> <a href="https://phpmemo.com/tags/laravel/" class="invert">Laravel</a> <a href="https://phpmemo.com/tags/php/" class="invert">PHP</a></div></header><div class="post__entry"><p>Many posts online suggest that enabling PHP JIT is as simple as adding some values to the <strong>php.ini</strong> file, but that's not exactly the case. Sometimes adding these configuration values doesn't seem to do anything. In this post, I'll show how to enable PHP JIT when nothing seems to work. I'll use a default Laravel Sail Docker container, but the idea is the same for any server running PHP.</p><p>1. Check if a PHP extension is blocking JIT from loading. Type this command in the terminal to see JIT status:</p><pre class="language-bash"><code>./vendor/bin/sail php -r "print_r(opcache_get_status(false)['jit']);"</code></pre><p class="whitespace-pre-wrap break-words">If you see this warning, then a PHP extension is blocking JIT:</p><blockquote><p>PHP Warning: JIT is incompatible with third-party extensions that override zend_execute_ex(). JIT disabled. in Unknown on line 0.</p></blockquote><p>2. Disable problematic extensions. Laravel Sail Docker file installs many extensions, so we need to identify which ones are not compatible with PHP JIT. After disabling extensions one by one, I found that <strong>php8.3-pcov</strong> and <strong>php8.3-xdebug</strong> are problematic.</p><p class="whitespace-pre-wrap break-words">To disable these extensions:</p><ul class="-mt-1 [li&gt;&amp;]:mt-2 list-disc space-y-2 pl-8"><li class="whitespace-normal break-words">Ensure your .env file doesn't have <strong>SAIL_XDEBUG_MODE</strong> or any other environmental values that enable xDebug</li><li class="whitespace-normal break-words">Add these values to your php.ini:</li></ul><pre class="language-bash"><code>pcov.enabled=0
xdebug.mode=off</code></pre><p>Also, add these values to enable JIT:</p><pre class="language-bash"><code>[opcache]
zend_extension=opcache.so
opcache.enable=1
opcache.enable_cli=1
opcache.memory_consumption=128M
opcache.interned_strings_buffer=8
opcache.max_accelerated_files=4000
opcache.revalidate_freq=60
opcache.fast_shutdown=1
opcache.jit_buffer_size=100M
opcache.jit=tracing</code></pre><p>3. <span style="color: var(--text-primary-color); font-family: var(--editor-font-family); font-size: inherit; font-weight: var(--font-weight-normal);">Restart If you're using Laravel Sail, rebuild your image with:</span></p><ul class="-mt-1 [li&gt;&amp;]:mt-2 list-disc space-y-2 pl-8"><li class="whitespace-normal break-words"><code class="bg-text-200/5 border border-0.5 border-border-300 text-danger-000 whitespace-pre-wrap rounded-[0.3rem] px-1 py-px text-[0.9rem]">sail down</code></li><li class="whitespace-normal break-words"><code class="bg-text-200/5 border border-0.5 border-border-300 text-danger-000 whitespace-pre-wrap rounded-[0.3rem] px-1 py-px text-[0.9rem]">sail build</code></li><li class="whitespace-normal break-words"><code class="bg-text-200/5 border border-0.5 border-border-300 text-danger-000 whitespace-pre-wrap rounded-[0.3rem] px-1 py-px text-[0.9rem]">sail up -d</code></li></ul><p class="whitespace-pre-wrap break-words">Execute the command again to verify if JIT is properly enabled:</p><pre class="language-bash"><code>./vendor/bin/sail php -r "print_r(opcache_get_status(false)['jit']);"</code></pre><p>And that's it. Hopefully, your PHP JIT is now enabled and working.</p></div><footer class="wrapper post__footer"><p class="post__last-updated">This article was updated on November 30, 2024</p><div class="post__share"></div></footer><nav class="pagination"><div class="pagination__title"><span>Read other posts</span></div><div class="pagination__buttons"><a href="https://phpmemo.com/setting-up-laravel-dusk-for-laravel-sail-project-with-decoupled-vue-frontend-on-windows-2.html" class="btn previous" rel="prev" aria-label="[MISSING TRANSLATION]:  Setting up Laravel Dusk for Laravel Sail Project with Decoupled Vue Frontend on Windows "><span class="btn__icon">←</span> <span class="btn__text">Setting up Laravel Dusk for Laravel Sail Project with Decoupled Vue Frontend on Windows</span></a></div></nav></article></main><footer class="footer"><div class="footer__inner"><div class="footer__copyright"><p>© 2024 PHPMemo. Find me on <a href="https://github.com/enxas" target="_blank" rel="noopener">GitHub</a>.</p></div></div></footer></div><script defer="defer" src="https://phpmemo.com/assets/js/scripts.min.js?v=c2232aa7558e9517946129d2a1b8c770"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><script defer="defer" src="https://phpmemo.com/media/plugins/syntaxHighlighter/prism.js"></script><script defer="defer" src="https://phpmemo.com/media/plugins/syntaxHighlighter/clipboard.min.js"></script><script defer="defer" src="https://phpmemo.com/media/plugins/syntaxHighlighter/prism-copy-to-clipboard.min.js"></script></body></html>